<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Magellan • Magellan</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Magellan">
<meta property="og:description" content="Magellan">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Magellan</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.99.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/Magellan.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/CreatePipeline.html">Add a new pipeline</a>
    </li>
    <li>
      <a href="../articles/CreateProcess.html">Create a new process</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/samWieczorek/Magellan/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Magellan_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Magellan</h1>
            <h3 class="subtitle">A developer’s guideline</h3>
                        <h4 class="author">Samuel Wieczorek</h4>
            
            <h4 class="date">octobre 29, 2021</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/samWieczorek/Magellan/blob/master/vignettes/Magellan.Rmd"><code>vignettes/Magellan.Rmd</code></a></small>
      <div class="hidden name"><code>Magellan.Rmd</code></div>

    </div>

    
    
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  document.querySelector("h1").className = "title";
});
</script><script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  var links = document.links;  
  for (var i = 0, linksLength = links.length; i < linksLength; i++)
    if (links[i].hostname != window.location.hostname)
      links[i].target = '_blank';
});
</script><p>Magellan is a Shiny application which contains only few R6 classes. It is not used alone but it is the core engine for data processing workflows. Thus, this article is not for end-users but for developers who are interesting in writing new data processing tools and/or to combine them in pipelines</p>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>Magellan is a series of R6 class which build several levels of navigation timeline.</p>
</div>
<div id="how-to-integrate-your-pipeline-into-your-shiny-app" class="section level1">
<h1 class="hasAnchor">
<a href="#how-to-integrate-your-pipeline-into-your-shiny-app" class="anchor"></a>How to integrate your Pipeline into your shiny app ?</h1>
<p>library(MSPipelines)</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>Magellan is deploied as a Docker file.</p>
<!-- ```R -->
<!-- docker build -t magellan-image .  -->
<!-- ``` -->
<p>Building the image We open the terminal, navigate to the folder containing our new Dockerfile, and start the building process:</p>
<!-- ```R -->
<!-- docker build -t magellan.image .  -->
<!-- ``` -->
<p>Starting a container After the building process has finished, we can now test our newly built image by starting a container:</p>
<!-- ```R -->
<!-- docker run -d --rm -p 3838:3838 my-shinyapp-magellan.image -->
<!-- ``` -->
</div>
<div id="global-architecture" class="section level1">
<h1 class="hasAnchor">
<a href="#global-architecture" class="anchor"></a>Global architecture</h1>
<p>A process (or pipeline) consists in screens and it is a R6 class which inherits from classes in Magellan</p>
</div>
<div id="how-to-use-magellan" class="section level1">
<h1 class="hasAnchor">
<a href="#how-to-use-magellan" class="anchor"></a>How to use Magellan</h1>
<p>This vignette aims to describe how to use the workflow ui to process a dataset. The goal is not to describe the different data processing tools available in prostar but to explain the behaviour of the user interface of what we call ‘Prostar core’.</p>
<p>As explained in xxx, Mage implements two different levels of data processing tools:</p>
<ul>
<li>the upper level correspond to a ‘pipeline’ and it deals with the type of data and the level of analysis (peptide, protein, peptidomic, etc..). The description of that can be found here (xxx).</li>
<li>the xxx level correspond to the data processing tools (Filtering, Normalization, etc..)</li>
</ul>
<p>One timeline is used to navigate within each of these levels. They have mostly the same behaviour</p>
<p>In Prostar, two timelines are used to navigate # Specifications</p>
<p>When the class Pipeline is instantiated, there is no dataset loaded yet. The two timelines are shown and all their bullets are disabled (as the screens). Thus, the user can navigate on all the tools. In general, when a step is disabled, the user can show the corresponding screen but cannot interact with input widgets.</p>
<p>Common behaviour</p>
<p>The next and previous are always enabled whenever the steps are disabled, except in two situations:</p>
<ul>
<li>when the current step is the first one, the previous button is disabled,</li>
<li>when the current step is the last one, the ‘Next’ button is disabled.</li>
</ul>
<p>When the user clicks on the previous/next buttons, the current screen change.</p>
<p>A few rules form the basis of the workflow engine:</p>
<ul>
<li>if the current step is validated, then all the previous ones are disabled. The current dataset is updated with the return value of the current step. The further steps are enabled except if there are some mandatory ones.</li>
<li>for any mandatory step which has not been validated yet, all the further steps are disabled,</li>
<li>if there are some non validated step before the current one which has been validated, then those steps are tagged as ‘skipped’ and they are disabled.</li>
</ul>
</div>
<div id="definition-of-a-pipeline" class="section level1">
<h1 class="hasAnchor">
<a href="#definition-of-a-pipeline" class="anchor"></a>Definition of a pipeline</h1>
<p>A pipeline is defined by a list of data processing tools in association with a tag indicating if the step is mandatory or not. The first step of each level is always a description one which explains the algorithms implemented in the tool and how to use it.</p>
<div id="status-of-the-steps" class="section level2">
<h2 class="hasAnchor">
<a href="#status-of-the-steps" class="anchor"></a>Status of the steps</h2>
<p>Each step of a given level can have different status. It may be:</p>
<ul>
<li>Undone: xxx</li>
<li>Skipped: xxxx</li>
<li>Validated: xxx</li>
</ul>
<p>Timeline color code :</p>
<ul>
<li>Grey with solid line:</li>
<li>Grey with dashed line:</li>
<li>Green: the step is validated (the result of the process has been saved)</li>
<li>Red: the step is mandatory. All further steps are disabled until the user validate the mandatory one</li>
</ul>
<p>Plain green circle indicates a validated step. When the colors are transparent, it means that the corresponding step is disabled: all inputs and the reset button are disabled.</p>
</div>
</div>
<div id="datasets" class="section level1">
<h1 class="hasAnchor">
<a href="#datasets" class="anchor"></a>Datasets</h1>
<p>At the beginning, no dataset is loaded in the core engine. When the user loads one, it is injected in the core engine. By default, the steps receive a NULL value for the dataset. A dataset is loaded in a step only when the user is showing it.</p>
<p>However, if the user go to a disabled step in the pipeline level, the dataset is not loaded.</p>
</div>
<div id="validating-a-step" class="section level1">
<h1 class="hasAnchor">
<a href="#validating-a-step" class="anchor"></a>Validating a step</h1>
<p>Once validated, a step is disabled and stay in this state until it is reseted. Thus, the value of all parameters are kept event if the user navigates to other steps.</p>
<div id="node-level-pipeline" class="section level3">
<h3 class="hasAnchor">
<a href="#node-level-pipeline" class="anchor"></a>Node level (pipeline)</h3>
<p>At a node level (pipeline), each time a step is validated, the corresponding dataset is returned to Prostar. This allows the user to stop an analysis at any time without loosing its work.</p>
</div>
<div id="leaf-level-data-processing-tools" class="section level3">
<h3 class="hasAnchor">
<a href="#leaf-level-data-processing-tools" class="anchor"></a>Leaf level (data processing tools)</h3>
<p>At a leaf level (data processing tools), the resulting dataset is returned only when the last step (named ‘Validation’) is validated. In this case, the engine does not keep intermediate datasets. Here, the datasets are returned to the upper level which is the pipeline.</p>
</div>
</div>
<div id="reseting-a-step" class="section level1">
<h1 class="hasAnchor">
<a href="#reseting-a-step" class="anchor"></a>Reseting a step</h1>
<ul>
<li>
<p>On a given level, a clic on the ‘Reset’ button will have the following actions:</p>
<ul>
<li>A popup appear to indicate to the user that the data will be erased. He has to agree this information to process,</li>
<li>the current step is set to the first one</li>
<li>the dataset is updated to either the same if the step has not been validated or to the dataset produced by the last validated step,</li>
<li>If the reset is clicked on a ‘node’ level, all the children below this point are also reset. In this case, the info popup is only showed on the node level, not on each children steps.</li>
</ul>
</li>
</ul>
</div>
<div id="skipping-a-step" class="section level1">
<h1 class="hasAnchor">
<a href="#skipping-a-step" class="anchor"></a>Skipping a step</h1>
<p>A step is skipped when it has not been validated and a further one is validated. Thus, the status of a step with indice i is set to ‘skipped’ only when a step with indice j &gt; i is validated. Each skipped step is disabled and if it is a node step (a data processing tool in the pipeline timeline), then all the subsequent steps of the processing tool are also tagged as ‘skipped’ and disabled, event the ‘Reset’ button.</p>
</div>
<div id="navigating-through-a-level" class="section level1">
<h1 class="hasAnchor">
<a href="#navigating-through-a-level" class="anchor"></a>Navigating through a level</h1>
<p>WHen the user navigates in the timelines, the steps previously validated are kept in the state they have when they have been validated</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Samuel Wieczorek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
