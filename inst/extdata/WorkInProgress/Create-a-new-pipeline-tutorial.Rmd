---
title: "Create a template"
author: 
- name: Samuel Wieczorek
package: MagellanNTK
abstract: >
    xxxxx.
date: "`r Sys.Date()`"
output:
    BiocStyle::html_document:
      toc: true
      highlight: tango
      number_sections: yes
      toc_depth: 3
      theme: united
      keep_md: true
      papersize: a4
vignette: >
    %\VignetteIndexEntry{Create a template}
    %%\VignetteKeywords{Softmware, Mass Spectrometry, Quantitative, process manager}
    %\VignetteEncoding{UTF-8}
    %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
  markdown: 
    wrap: 72
---


```{css echo=FALSE}
.bordered{
  border-style: solid;
}
```


# Introduction

This vignette explains how to create a new workflow in the MagellanNTK
framework. MagellanNTK provides a Shiny app (called Tools_Templates())
to facilitate this operation.. As there are several steps to get the
information needed, the app uses MagellanNTK itself. One of the
advantage is to introduce the UI of MagellanNTK

The templates that can be created are some R code with the basic (and
needed) code of a framework compliant with MagellanNTK. This means that
the code generated may be completed but not deleted

# Features of Tools_Template()

The Shiny app is able to create three types of templates:

-   pipeline template: xxx

-   process template: xxx

-   extra module template: This template creates a module with the
    correct input and output to be inserted in MagellanNTK

The two first templates also create:

-   the Description markdown template

-   the generic functions that can be customized within the app






# Pipeline structure hierarchy

For a more details on our definitions of workflows, processes,
pipelines, please refer to the User manual of MagellanNTK.

The files which compose a workflow are stored in a directory whose name is the 
name of the pipeline. This directory contains 3 elements:

  * A txte file called 'config.txt', 
A pipeline is identified by its name while a process is identified by a
name composed of the name of the pipeline it belongs to and its own
name. For example, 'Pipeline A' will be identified by 'PipelineA', and
the process 2 of this pipeline is identified by 'PipelineA_Process2'.

::: bordered
```{r listfuncs, results='markup', fig.cap="UI process", echo=FALSE, out.width='50%', fig.align='center', fig.wide = TRUE}
knitr::include_graphics("./figs/hierarchy_funcs.png", error = FALSE)
```
:::

It is possible that a process is the same in two pipelines. For
simplicity reasons, one decide to duplicate their code and they have
different names.



# Create a pipeline

MagellantNTK has a Shiny application to help developers to create a new
workflow by crating a template source code. The developer has only to
complete this template to achieve the code.

To launch the application, just run:

```         
Tools_template()
```

This will open the Shiny app. For a complete description of the UI, please refer to xxx.

## Step 'Description'

::: bordered
```{r ToolsTemplates1, results='markup', fig.cap="A process is a sequence of single tasks.", echo=FALSE, out.width='100%', fig.align='center', fig.wide = TRUE}
knitr::include_graphics("./figs/Tools_Templates_1.png", error = FALSE)
```
:::

## Step 'Create template'

::: bordered
```{r ToolsTemplates2, results='markup', fig.cap="A process is a sequence of single tasks.", echo=FALSE, out.width='100%', fig.align='center', fig.wide = TRUE}
knitr::include_graphics("./figs/Tools_Templates_2.png", error = FALSE)
```
:::

## Step 'Custom dataset functions'

::: bordered
```{r ToolsTemplates3, results='markup', fig.cap="A process is a sequence of single tasks.", echo=FALSE, out.width='100%', fig.align='center', fig.wide = TRUE}
knitr::include_graphics("./figs/Tools_Templates_3.png", error = FALSE)
```
:::

## Step 'Configure steps'

::: bordered
```{r ToolsTemplates4, results='markup', fig.cap="A process is a sequence of single tasks.", echo=FALSE, out.width='100%', fig.align='center', fig.wide = TRUE}
knitr::include_graphics("./figs/Tools_Templates_4.png", error = FALSE)
```
:::

## Step 'Save'


::: bordered
```{r ToolsTemplates5, results='markup', fig.cap="A process is a sequence of single tasks.", echo=FALSE, out.width='100%', fig.align='center', fig.wide = TRUE}
knitr::include_graphics("./figs/Tools_Templates_5.png", error = FALSE)
```
:::


Add widgets

Instantiate generic functions

Two functions are needed to modifu the list of datasets. These cannot be
automatically generated by MagellanNTK because some customization may be
needed and are dataset format dependant. The two functions are
addDatasets() and keepDatasets

Insert and connect a module
